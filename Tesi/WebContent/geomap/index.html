<!DOCTYPE html>
<html>
	<head>
		<title>Leaflet with Pie and Popup Ajax Example</title>
		<meta charset="utf-8" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!--[if lte IE 8]>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
		<![endif]-->
		<script type="text/javascript" src="../base/functions.js"></script>
		<script type="text/javascript" src="../base/operators.js"></script>
		<script type="text/javascript" src="../base/structures.js"></script>
		<script src="../lib/jquery/jquery.min.js" type="text/javascript"></script>

		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
		<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>

		<script src="piechart/Semicircle.js"></script>
		<script src="piechart/Pie.js"></script>

		<script type="text/javascript" src="init.js"></script>
		<link rel="stylesheet" href="style.css" />

		<script type="text/javascript">
			if ( typeof jQuery == 'undefined')
				alert("jQuery Non Found!.");

			$(document).ready(function() {
				var data = (function() {
					var json = null;
					$.ajax({
						'async' : false,
						'global' : false,
						'url' : "data.json",
						'dataType' : "json",
						'success' : function(data) {
							json = data;
						}
					});
					return json;
				})();

				
				var mapping = {
					"id" : "id",
					"name":"name",
					"coordinates" : [toList, "lat", "lon"]
				}

				var gm = new GeoMap('map', data.map(mapping));
				
				var gm2 = new GeoMap('map2', data.map(mapping));
				gm2.remove(1);

			});
		</script>
	</head>
	<body>
		<div id="map">
		</div>
		
		<div id="map2">
		</div>
	</body>
</html>
